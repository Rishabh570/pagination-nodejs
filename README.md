# pagination-nodejs

Implements cursor-based pagination with Node.js and PostgreSQL

## Pre-requisites

- PostgreSQL server [installed](https://www.postgresql.org/download/) and running on your local machine (I prefer [psql](https://www.timescale.com/blog/how-to-install-psql-on-mac-ubuntu-debian-windows/) to interact with the database).
- Node.js and npm installed with Node.js version >= 16.
- Basic understanding of REST API with Express.js framework.

# Installation

1. Clone the repo

```shell
  git clone git@github.com:Rishabh570/pagination-nodejs.git
```

2. Install the dependencies

```shell
  npm install
```

3. Source the environment variables

You can find the ENV variables being used in `config.js` at the project's root level. Rename the `.env.example` file to `.env` and fill in the desired values for the environment variables.

If your Postgres is not set to _trust_ local connections, provide the correct password for your Postgres user. To turn off password authentication, edit your `pg_hba.conf` (run `SHOW hba_file;` as a superuser to know the file location) file to trust all local connections. It should look like this:

```txt
host    all             all             0.0.0.0/0             trust
```

Once done, you can do `source .env` on macOS to load environment variables. Otherwise, try replacing "source" with "." (for more information, refer to [this](https://stackoverflow.com/questions/13702425/source-command-not-found-in-sh-shell)) or load the environment variables directly into the terminal.

4. Run the server

```shell
  npm start
```

5. Create a table in your Postgres database. Connect to your Postgres database locally and run the below command to create a table named "items".

```shell
  create table items (
    id bigint generated by default as identity,
    created_at timestamp with time zone not null default now(),
    name text not null,
    description text null,
    constraint item_pkey primary key (id),
    constraint item_id_key unique (id),
    constraint item_name_key unique (name)
  );
```

6. Load sample data in your items table by hitting the API endpoint - POST /item/create.
